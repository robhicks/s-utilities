function hasClass(t,e){return!!t&&!(!t.className||null===t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)")))}function addClass(t,e){!hasClass(t,e)&&t&&(t.className+=(t.className?" ":"")+e)}function addClasses(t,e=""){e.split(" ").forEach(e=>addClass(t,e))}function removeClass(t,e){t&&hasClass(t,e)&&(t.className=t.className.replace(new RegExp("(\\s|^)"+e+"(\\s|$)")," ").replace(/^\s+|\s+$/g,""))}function toggleClass(t,e){hasClass(t,e)?removeClass(t,e):addClass(t,e)}function accessCode(){let t=(new Date).getTime();return"xxxxx".replace(/[xy]/g,function(e){let n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)})}function appendAfter(t,e){if(t.nextSibling)return void t.parentNode.insertBefore(e,t.nextSibling);t.parentNode.appendChild(e)}function contains(t="",e){return-1!==t.indexOf(e)}function copy(t={}){return JSON.parse(JSON.stringify(t))}function debounce(t,e,n){let r;return function(){let i=this,s=arguments,o=function(){r=null,n||t.apply(i,s)},a=n&&!r;clearTimeout(r),r=setTimeout(o,e),a&&t.apply(i,s)}}function isInViewport(t){let e=t.getBoundingClientRect(),n=document.documentElement;return e.top>=0-e.height&&e.left>=0-e.width&&e.bottom<=n.clientHeight+e.height&&e.right<=n.clientWidth}function isJson(t){try{let e=JSON.parse(t);return e}catch(t){return!1}}function pad(t="",e,n="0"){return t.length>=e?t:new Array(e-t.length+1).join(n)+t}function throttle(t,e,n){return debounce(t,e,n)}function uuid$1(){let t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)})}function argValidator(t,e){if("string"!=typeof t)throw TypeError("event must be string");if("function"!=typeof e)throw TypeError("listener must be function")}Promise.allSettled=(t=>Promise.all(t.map(t=>t.then(t=>({state:"fulfilled",value:t})).catch(t=>({state:"rejected",reason:t}))))),Promise.series=(t=>{let e=[];return t.reduce(function(t,n){return t.then(function(){return n.then(function(t){return e.push(t),e})})},Promise.resolve())});class DataStore{constructor(){this.storeMap={}}get(t,e){return this.getStore(t)[e]||null}getAll(){console.log("this.storeMap",this.storeMap)}set(t,e,n){if(n)return this.getStore(t)[e]=n,n}remove(t,e){if(e){let n=this.getStore(t);n[e]&&delete n[e]}else{let e=t[this.storeId];e&&(delete this.storeMap[e],delete t[this.storeId])}}getStore(t){let e=this.storeId,n=this.storeMap,r=t[e];return r||(n[r=t[e]=this.uid++]={}),n[r]}}class DeepProxy{constructor(t,e,n=!1){if("object"!=typeof t||"object"!=typeof e)throw TypeError("target and handler must be objects");return this._create(t,e,n)}_create(t,e,n=!1){let r,i=(r=Array.isArray(t)?t:n?Proxy.revocable(t,e):new Proxy(t,e)).proxy?r.proxy:r;for(let t in i)i.hasOwnProperty(t)&&(i[t]&&"object"==typeof i[t]&&!Array.isArray(i)&&(i[t]=this._create(i[t],e,n)),Array.isArray(i)&&(i=n?Proxy.revocable(i,e):new Proxy(i,e)));return Array.isArray(r)?n?Proxy.revocable(r,e):new Proxy(r,e):r}static revocable(t,e){let n=new DeepProxy(t,e,!0);return{revoke:n.revoke,proxy:n.proxy}}}class StringBuilder{constructor(t=""){this.string=String(t)}toString(){return this.string}append(t){return this.string+=t,this}insert(t,e){this.string.length;let n=this.string.slice(0,t),r=this.string.slice(t);return this.string=n+e+r,this}}const eventEmitterMap=new Map;class EventEmitter{constructor(t=!1){if(t){if(eventEmitterMap.has("instance"))return eventEmitterMap.get("instance");eventEmitterMap.set("instance",this)}this.events={}}clear(){this.events={}}emit(t,...e){this.events[t]&&(this.events[t]||[]).forEach(t=>t(...e))}off(t,e){if(argValidator(t,e),this.events[t]){let n=this.events[t].findIndex(t=>t===e);n>-1&&this.events[t].splice(n,1),0===this.events[t].length&&delete this.events[t]}}on(t,e){argValidator(t,e),this.events[t]||(this.events[t]=[]),this.events[t].push(e)}once(t,e){argValidator(t,e);let n=this;this.on(t,function r(){n.off(t,r),e.apply(this,arguments)})}get size(){return Object.keys(this.events).length}}export{accessCode,addClass,addClasses,appendAfter,contains,copy,DataStore,debounce,DeepProxy,hasClass,isInViewport,isJson,pad,removeClass,StringBuilder,throttle,toggleClass,uuid$1 as uuid,EventEmitter};
